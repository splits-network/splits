---
phase: 02-visual-redesign
plan: 02
type: execute
wave: 2
depends_on: ["02-01"]
files_modified:
    - apps/portal/src/app/pricing/pricing-content.tsx
autonomous: true

must_haves:
    truths:
        - "Three pricing cards animate into view with staggered timing"
        - "Price numbers animate from 0 to final value (count up effect)"
        - "Cards scale in with bounce easing for premium feel"
    artifacts:
        - path: "apps/portal/src/app/pricing/pricing-content.tsx"
          provides: "Animated pricing cards with number counters"
          contains: "pricing-card"
    key_links:
        - from: "pricing-content.tsx"
          to: "animation-utils.ts"
          via: "scaleIn preset pattern"
          pattern: "scale.*0\\.9"
---

<objective>
Add scroll-triggered animations to pricing cards with staggered reveal and animated number counters for prices.

Purpose: Animated pricing cards draw attention and make the page feel dynamic. Number counters add visual interest and emphasize the value proposition.
Output: Three pricing cards that scale in with stagger, with price numbers counting up from 0.
</objective>

<execution_context>
@./.claude/get-shit-done/workflows/execute-plan.md
@./.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/phases/02-visual-redesign/02-01-SUMMARY.md
@apps/portal/src/app/pricing/pricing-content.tsx
@apps/portal/src/components/landing/sections/metrics-section.tsx
@apps/portal/src/components/landing/shared/animation-utils.ts
</context>

<tasks>

<task type="auto">
  <name>Task 1: Add scroll-triggered card animations with stagger</name>
  <files>apps/portal/src/app/pricing/pricing-content.tsx</files>
  <action>
Add scroll-triggered animations to the three pricing cards (Starter, Pro, Partner) with scale-in and stagger effect.

Implementation:

1. Create new refs:
    - `cardsSectionRef` for the pricing cards section
    - `cardsContainerRef` for the grid containing the cards

2. Add CSS class `pricing-card` to each of the three card divs (currently just have `card bg-base-200 shadow` etc.)

3. Add `opacity-0` class to each card for initial hidden state

4. Add new useGSAP block (separate from hero animation) for card animations:

    ```typescript
    useGSAP(
        () => {
            if (!cardsSectionRef.current) return;

            const prefersReducedMotion = window.matchMedia(
                "(prefers-reduced-motion: reduce)",
            ).matches;
            if (prefersReducedMotion) return;

            const cards =
                cardsContainerRef.current?.querySelectorAll(".pricing-card");
            if (cards) {
                gsap.fromTo(
                    cards,
                    { opacity: 0, y: 40, scale: 0.9 },
                    {
                        opacity: 1,
                        y: 0,
                        scale: 1,
                        duration: duration.normal,
                        ease: easing.bounce,
                        stagger: stagger.normal,
                        scrollTrigger: {
                            trigger: cardsContainerRef.current,
                            start: "top 75%",
                        },
                    },
                );
            }
        },
        { scope: cardsSectionRef },
    );
    ```

5. Note: The Pro card already has `scale-105` CSS class - keep this as it's the static "featured" styling, not the animation scale.

Pattern follows metrics-section.tsx staggered card animation pattern.
</action>
<verify>

1. Build check: `pnpm --filter @splits-network/portal build` passes
2. Visual test: Scroll down to pricing cards - they should animate in with bounce, staggered left to right
3. Pro card should remain slightly larger than others after animation (the static scale-105)
   </verify>
   <done>
   All three pricing cards animate into view with scale-in effect and staggered timing. Pro card maintains its featured prominence after animation.
   </done>
   </task>

<task type="auto">
  <name>Task 2: Add animated number counters for prices</name>
  <files>apps/portal/src/app/pricing/pricing-content.tsx</files>
  <action>
Add animated counting effect to price numbers ($99, $249) and the fee range (15-25%) in the For Companies section.

Implementation:

1. Create refs for price elements:
    - `proPriceRef` for the $99 price
    - `partnerPriceRef` for the $249 price
    - `feeRangeRef` for the 15-25% text

2. Modify the price display to use state for animated values:

    ```typescript
    const [proPrice, setProPrice] = useState(0);
    const [partnerPrice, setPartnerPrice] = useState(0);
    const [feeMin, setFeeMin] = useState(0);
    const [feeMax, setFeeMax] = useState(0);
    ```

3. Add import for useState from React

4. Add number counter animation in the cards useGSAP block (after card stagger animation):

    ```typescript
    // Number counter animations - trigger after cards are visible
    gsap.to(
        {},
        {
            duration: duration.counter,
            ease: "power2.out",
            scrollTrigger: {
                trigger: cardsContainerRef.current,
                start: "top 70%",
            },
            onUpdate: function () {
                const progress = this.progress();
                setProPrice(Math.round(99 * progress));
                setPartnerPrice(Math.round(249 * progress));
            },
        },
    );
    ```

5. Update the Pro card price display:

    ```tsx
    <h3 className="card-title text-3xl mb-2">
        ${proPrice}
        <span className="text-lg font-normal opacity-80">/month</span>
    </h3>
    ```

6. Update the Partner card price display:

    ```tsx
    <h3 className="card-title text-3xl mb-2">
        ${partnerPrice}
        <span className="text-lg font-normal text-base-content/60">/month</span>
    </h3>
    ```

7. For the fee range in For Companies section, add a separate counter:
    - Add `companiesSectionRef` for that section
    - Add useGSAP for the fee range counter with separate trigger
    - Display: `{feeMin}-{feeMax}%`

Note: Use `duration.counter` (1.5s) for counting animation. The landing page animation-utils already has this preset.
</action>
<verify>

1. Build check: `pnpm --filter @splits-network/portal build` passes
2. Visual test: Scroll to pricing cards - $99 and $249 should count up from 0
3. Visual test: Scroll to For Companies section - 15-25% should count up
4. Reduced motion: Numbers should appear at final value immediately (no counting)
   </verify>
   <done>
   Price numbers ($99, $249) animate from 0 to final value as cards come into view. Fee percentage range (15-25%) animates similarly in For Companies section. All counters respect reduced motion preference.
   </done>
   </task>

</tasks>

<verification>
1. `pnpm --filter @splits-network/portal build` completes without errors
2. Cards animate with scale-in + stagger on scroll
3. Prices count up smoothly (0 -> 99, 0 -> 249)
4. Fee percentage counts up (0-0% -> 15-25%)
5. Pro card stays visually prominent (scale-105) after animation
6. Reduced motion check prevents animations and counters
</verification>

<success_criteria>

- Three pricing cards have `.pricing-card` class and animate on scroll
- Cards use scaleIn pattern (scale 0.9 -> 1) with bounce easing
- Cards stagger with stagger.normal timing
- $99 and $249 prices animate from 0 to final value
- 15-25% fee range animates from 0-0% to final value
- Counter animation uses duration.counter (1.5s)
- All animations respect prefers-reduced-motion
- Build passes with no TypeScript errors
  </success_criteria>

<output>
After completion, create `.planning/phases/02-visual-redesign/02-02-SUMMARY.md`
</output>
