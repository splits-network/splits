/* @layer base; */

@import "tailwindcss";
@plugin "daisyui";

@import "./themes/light.css";
@import "./themes/dark.css";

/* Cookie Consent Banner Animation */
@keyframes slide-up {
    from {
        transform: translateY(100%);
        opacity: 0;
    }

    to {
        transform: translateY(0);
        opacity: 1;
    }
}

.animate-slide-up {
    animation: slide-up 0.3s ease-out;
}

/* Ensure stat descriptions wrap text properly */
.stat-desc {
    white-space: normal;
    word-break: break-word;
}

/* ============================================
   Design System Tokens & Utilities
   ============================================ */


/* Expand/Collapse Animation */
@keyframes expand-down {
    from {
        opacity: 0;
        max-height: 0;
    }

    to {
        opacity: 1;
        max-height: 500px;
    }
}

@keyframes collapse-up {
    from {
        opacity: 1;
        max-height: 500px;
    }

    to {
        opacity: 0;
        max-height: 0;
    }
}

.animate-expand {
    animation: expand-down 0.3s ease-out forwards;
    overflow: hidden;
}

.animate-collapse {
    animation: collapse-up 0.2s ease-in forwards;
    overflow: hidden;
}

/* Fade In Animation */
@keyframes fade-in {
    from {
        opacity: 0;
    }

    to {
        opacity: 1;
    }
}

.animate-fade-in {
    animation: fade-in 0.2s ease-out;
}

/* Markdown editor overrides */
.w-md-editor {
    border-radius: 0 !important;
}

.w-md-editor-toolbar {
    border-radius: 0 !important;
}

.w-md-editor-content {
    border-radius: 0 !important;
}

/* Force markdown editor fullscreen to cover viewport */
.w-md-editor-fullscreen {
    height: 100vh !important;
    width: 100vw !important;
    position: fixed !important;
    top: 0 !important;
    left: 0 !important;
    z-index: 9999 !important;
}

/* Scale In Animation */
@keyframes scale-in {
    from {
        opacity: 0;
        transform: scale(0.95);
    }

    to {
        opacity: 1;
        transform: scale(1);
    }
}

.animate-scale-in {
    animation: scale-in 0.2s ease-out;
}

/* Sidebar: full height on mobile, below sticky header + banner on desktop */
.sidebar-positioned {
    top: 0;
    height: 100vh;
}

@media (min-width: 1024px) {
    .sidebar-positioned {
        top: calc(var(--header-h, 0px) + var(--banner-h, 0px));
        height: calc(100vh - var(--header-h, 0px) - var(--banner-h, 0px));
    }
}

/* Sidebar Active Indicator */
.sidebar-item-active {
    position: relative;
}

.sidebar-item-active::before {
    content: '';
    position: absolute;
    left: 0;
    top: 0;
    bottom: 0;
    width: 3px;
    background: oklch(var(--color-primary));
    border-radius: 0 2px 2px 0;
}

/* Gradient Text */
.text-gradient-primary {
    background: linear-gradient(135deg, oklch(var(--color-primary)) 0%, oklch(var(--color-secondary)) 100%);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
}

/* Badge Ribbon (for entity cards) */
.badge-ribbon {
    border-top-left-radius: 0;
    border-bottom-left-radius: 0;
    box-shadow: -2px 2px 4px rgb(0 0 0 / 0.1);
}

/* Smooth scrollbar for sidebars */
.scrollbar-thin {
    scrollbar-width: thin;
    scrollbar-color: oklch(var(--color-base-300)) transparent;
}

.scrollbar-thin::-webkit-scrollbar {
    width: 6px;
}

.scrollbar-thin::-webkit-scrollbar-track {
    background: transparent;
}

.scrollbar-thin::-webkit-scrollbar-thumb {
    background-color: oklch(var(--color-base-300));
    border-radius: 3px;
}

.scrollbar-thin::-webkit-scrollbar-thumb:hover {
    background-color: oklch(var(--color-base-content) / 0.3);
}


/* .expanded-row {
    animation: expand-down 0.3s ease-out;
} */

.expanded-row td {
    @apply border-t-4 border-primary border-b-0 bg-base-100;
}

.expanded-row td:first-child {
    @apply rounded-tl-lg;
}

.expanded-row td:last-child {
    @apply rounded-tr-lg;
}

.expanded-row-detail td {
    @apply bg-base-100 shadow-xl p-0 border-t-0;
}

.expanded-row-detail td:first-child {
    @apply rounded-bl-lg;
}

.expanded-row-detail td:last-child {
    @apply rounded-br-lg;
}

/* ============================================
   SpeedDial / FAB — inline variant (not fixed)
   Adapted from memphis-ui fab.css
   ============================================ */

.speed-dial {
    @apply pointer-events-none relative z-20 inline-flex items-end text-sm whitespace-nowrap;

    > * {
        @apply pointer-events-auto flex items-center gap-2;
    }

    /* Trigger — stays in normal flow, sizes the container */
    > [tabindex] {
        @apply relative z-10 grid;
        transition-property: opacity, visibility, rotate;
        transition-duration: 0.2s;
        transition-timing-function: cubic-bezier(0.4, 0, 0.2, 1);
    }

    /* Trigger icon rotation on expand */
    > [tabindex] i {
        transition: rotate 0.2s cubic-bezier(0.4, 0, 0.2, 1);
    }

    &:focus-within > [tabindex] i {
        rotate: 45deg;
    }

    /* Action items — absolutely positioned, stacking upward from trigger */
    > :nth-child(n + 2) {
        @apply invisible scale-80 opacity-0 absolute right-0 justify-end;
        transition-property: opacity, scale, visibility;
        transition-duration: 0.2s;
        transition-timing-function: cubic-bezier(0.4, 0, 0.2, 1);
    }

    /* Stack items upward using bottom offsets (trigger height + gap per item) */
    > :nth-child(2) { bottom: calc(100% + 0.5rem); }
    > :nth-child(3) { bottom: calc(200% + 1rem); transition-delay: 30ms; }
    > :nth-child(4) { bottom: calc(300% + 1.5rem); transition-delay: 60ms; }
    > :nth-child(5) { bottom: calc(400% + 2rem); transition-delay: 90ms; }
    > :nth-child(6) { bottom: calc(500% + 2.5rem); transition-delay: 120ms; }
    > :nth-child(7) { bottom: calc(600% + 3rem); transition-delay: 150ms; }
    > :nth-child(8) { bottom: calc(700% + 3.5rem); transition-delay: 180ms; }

    /* Expanded state — bump z to float above sticky controls-bar (z-30) */
    &:focus-within {
        @apply z-40;

        > [tabindex]:first-child {
            @apply pointer-events-none;
        }

        > :nth-child(n + 2) {
            @apply visible scale-100 opacity-100;
        }
    }
}
